{
  "cells": [
    {
      "cell_type": "markdown",
      "id": "be7e8ab1",
      "metadata": {
        "id": "be7e8ab1"
      },
      "source": [
        "# Data Science for Marketing group project\n",
        "## Lisbon Attractions Reviews\n",
        "\n",
        "_Client: Lisbon Tourism Authority_\n",
        "\n",
        "\n",
        "(c) Nuno António 2025 - Rev. 1.00"
      ]
    },
    {
      "cell_type": "markdown",
      "id": "eb08a9a7",
      "metadata": {
        "id": "eb08a9a7"
      },
      "source": [
        "## Work description\n",
        "\n",
        "### Overview\n",
        "Turismo de Lisboa (TLA) (see https://www.visitlisboa.com/en/about-turismo-lisboa) wants to transform Tripadvisor reviews of Lisbon’s attractions into actionable guidance for marketing. Your team will act as LTA’s analytics partner, using the CRISP-DM process to diagnose the visitor experience, quantify improvement levers (e.g., crowding, value for money, accessibility), and recommend concrete actions for the next season.\n",
        "\n",
        "### Objectives\n",
        "1. **Measure** city and attraction-level experience quality (ratings & sentiment) and how it evolves over time/season.  \n",
        "2. **Diagnose** the key drivers of satisfaction/dissatisfaction (e.g., queues, price, cleanliness, interpretation quality).  \n",
        "3. **Segment** visitors (e.g., by language/market or trip type) to tailor messages and on-site services.  \n",
        "4. **Prioritize** interventions with an impact × effort view and produce a decision-ready roadmap.  \n",
        "5. **(Optional)** Benchmark Lisbon against peer European cities or attraction categories if comparable data are available.\n",
        "\n",
        "### Data (provided)\n",
        "- `attraction_data_reviews.csv` — review-level dataset (text, rating, date, etc.)\n",
        "- `attractions_data_metadata.csv` — attraction descriptors (category, location, hours, ticketing, etc.)\n",
        "- `attractions_list.csv` — list of attractions to scope the study.\n",
        "\n",
        "- **Reviews columns:** `title, text, rating, reviewer, visitMonth, country, visitType, contributions, likesNumber, replyText, replyDate, reviewDate, name, tripadvisorId, dateFirstCollection`\n",
        "- **Metadata columns:** `tripadvisorId, name, location, latitude, longitude, dateFirstCollection, ratingGlobal, reviewCount, url, attractionCategory, rankingPositionAttractionCategory, totalRankingUnitsAttractionCategory`\n",
        "- **Attractions list columns:** `name, url, tripadvisor_id, num_reviews`\n",
        "\n",
        "### Key Business Questions\n",
        "- What is the **overall satisfaction** by attraction and category? Which sites/companies are underperforming relative to peers and volume?\n",
        "- How do **trends** vary by month/season, day of week, and (if available) hour? Where do negative spikes occur?\n",
        "- Which **markets/languages** are most/least satisfied and why? What messages resonate in positive reviews?\n",
        "- Where are the biggest **value-for-money** gaps and what product tweaks (e.g., guided tours, skip-the-line) improve perception?\n",
        "- If we could make only **five interventions** next quarter, which would maximize impact?\n",
        "- **(Optional)** Which themes most influence ratings (**crowding/queues, staff, cleanliness, price/value, accessibility, interpretation quality**)?\n",
        "- **(Optional)** What **accessibility** or **safety/maintenance** issues recur, and at which sites?\n",
        "\n",
        "### Method (CRISP-DM)\n",
        "1. **Business Understanding**  \n",
        "   Translate LTA goals into KPIs and hypotheses; define success criteria (see below).\n",
        "2. **Data Understanding**  \n",
        "   Inspect coverage, date range, languages, missingness; validate representativeness and potential biases.\n",
        "3. **Data Preparation**  \n",
        "   - Parse/standardize dates and ratings; unify attraction IDs/names.  \n",
        "   - Text prep: cleaning, language detection, optional machine translation for comparability.  \n",
        "4. **Modeling & Analysis**  \n",
        "   - Descriptive: distributions, trends, peer-adjusted rankings.  \n",
        "   - **(Optional)** NLP: topic modeling (e.g., BERTopic/LDA) and sentiment per topic.  \n",
        "   - **(Optional)** Drivers: regressions/SHAP to quantify impact of themes on ratings.  \n",
        "   - Segmentation: by language/market or trip type; optional “first-time vs repeat” heuristics.  \n",
        "5. **Evaluation**  \n",
        "   Sanity checks, back-testing stability over time, interpretability, and stakeholder review.  \n",
        "6. **Deployment (Project Output)**  \n",
        "   Reproducible notebook + dashboards/scorecards, and a prioritized action plan.\n",
        "\n",
        "### Core KPIs (draft)\n",
        "- **Overall Satisfaction Score (OSS):** weighted mean rating per attraction/month.  \n",
        "- **(Optional)** **Topic Sentiment Score:** mean sentiment for themes (crowding, price, etc.).  \n",
        "- **Crowding Pressure Index:** share of reviews mentioning wait/crowd × seasonal intensity.  \n",
        "- **Accessibility Score:** ratio of positive vs negative accessibility mentions.  \n",
        "- **Value for Money Index:** sentiment/ratings around price/value adjusted by price tier.  \n",
        "- **Incident Rate:** safety/cleanliness issue mentions per 100 reviews.  \n",
        "- **Experience Quality Index (city-level):** composite of OSS, Accessibility, and inverse of Crowding/Incidents.\n",
        "\n",
        "### Risks, Ethics & Quality\n",
        "- **Bias & Representativeness:** online reviews may over-represent certain markets/segments; report limitations.  \n",
        "- **Language & Translation:** sentiment can shift with translation; validate on samples.  \n",
        "- **Attribution:** correlations ≠ causation; be explicit about inference limits.  \n",
        "- **Privacy:** use only public data; no attempt to deanonymize reviewers.\n",
        "\n",
        "### Stretch Goals (time permitting)\n",
        "- **Early-warning system** for emerging negative themes.  \n",
        "- **Geospatial joins** (if coordinates available) to map pain points and access.  \n",
        "- **Benchmarking** against EU peers using comparable categories/periods.\n",
        "\n",
        "### Deliverables\n",
        "- Python source code (Jupyter notebook or .py files) and/or Excel files\n",
        "    - Python code should be commented on to facilitate comprehension\n",
        "    - Remarks or Markup should be used to identify the different CRISP-DM phases, including Data understanding, Data preparation, among others\n",
        "- Powerpoint presentation (targeting non-technical audience)\n",
        "- Report (targeting non-technical audience):\n",
        "    - Maximum of 20 pages (including appendixes)\n",
        "    - Minimum font size is 10\n",
        "    - Should include an executive summary, background/context, a brief description of the problem, brief description of the methods, results and their discussion, focusing on insights and calls to action marketing-wise\n",
        "\n",
        "### Questions or additional information\n",
        "Your practical-class instructors act as LTA stakeholders. Use them to refine hypotheses and pressure-test recommendations.\n",
        "\n",
        "Good work—and have fun turning reviews into real-world improvements for Lisbon’s visitors and residents!\n"
      ]
    },
    {
      "cell_type": "markdown",
      "id": "d47fca2e",
      "metadata": {
        "id": "d47fca2e"
      },
      "source": [
        "\n",
        "## Strategic Questions (What Lisbon Tourism Authority cares about)\n",
        "\n",
        "Each question includes **Why it matters**, **How to answer**, and **Outputs**.\n",
        "\n",
        "### 1) Visitor Satisfaction & Experience\n",
        "- **Q1. What is the overall satisfaction by attraction and category?**\n",
        "  - *Why:* Prioritize funding, maintenance, and promotion.\n",
        "  - *How:* Star rating distribution; median/mean rating; confidence intervals.\n",
        "  - *Outputs:* Ranked league tables; control charts; flag underperformers.\n",
        "- **Q2. What are the top drivers of satisfaction and dissatisfaction?**\n",
        "  - *Why:* Target root causes (e.g., staff, queues, cleanliness, price).\n",
        "  - *How:* NLP on reviews (topic modeling + sentiment per topic); SHAP on rating regression.\n",
        "  - *Outputs:* Driver importance chart; topic-sentiment heatmap; actionable themes list.\n",
        "- **Q3. How do satisfaction levels change over time and season?**\n",
        "  - *Why:* Anticipate seasonal pain points (crowding, heat).\n",
        "  - *How:* Monthly time series of ratings and sentiment; change-point detection.\n",
        "  - *Outputs:* Seasonal trend lines; alert on sudden drops.\n",
        "\n",
        "### 2) Crowding, Capacity & Operations\n",
        "- **Q4. Which attractions most frequently face overcrowding or queue complaints?**\n",
        "  - *Why:* Queue management, timed entries, staffing, wayfinding.\n",
        "  - *How:* Keyword/LLM tagging for “queue”, “wait”, “crowd”; topic frequency over time.\n",
        "  - *Outputs:* Heatmap of crowding mentions; peak hours/days table.\n",
        "- **Q5. What is the relationship between crowding mentions and ratings?**\n",
        "  - *Why:* Quantify the cost of crowding on satisfaction.\n",
        "  - *How:* Correlate topic intensity with ratings; causal proxy via panel models.\n",
        "  - *Outputs:* Elasticity estimate; marginal impact plots.\n",
        "- **Q6. When do negative experiences cluster (day of week, hour, month)?**\n",
        "  - *Why:* Inform staggered opening hours or capacity caps.\n",
        "  - *How:* Temporal features from review timestamps; seasonality decomposition.\n",
        "  - *Outputs:* Calendar heatmaps; recommendations for schedule changes.\n",
        "\n",
        "### 3) Market Segmentation & Source Markets\n",
        "- **Q7. Which nationalities/language groups are most satisfied, and where are gaps?**\n",
        "  - *Why:* Tailor information, signage, and campaigns.\n",
        "  - *How:* Language detection; geo-inference from user profiles/text; per-segment KPIs.\n",
        "  - *Outputs:* Segment scorecards; translation priorities.\n",
        "- **Q8. How do first-time vs repeat visitors differ in needs and sentiment?**\n",
        "  - *Why:* Product-market fit for newcomers vs loyalists.\n",
        "  - *How:* Heuristics in text (“first time”, “again”); clustering.\n",
        "  - *Outputs:* Experience journey differences; targeted messaging.\n",
        "\n",
        "### 4) Value for Money & Pricing Perception\n",
        "- **Q9. Where is “value for money” praised vs criticized?**\n",
        "  - *Why:* Pricing policy, bundle passes, discounts.\n",
        "  - *How:* Topic/sentiment on “price”, “expensive”, “worth it”.\n",
        "  - *Outputs:* Value-perception map; elasticity proxies.\n",
        "- **Q10. Which add-ons (guides, skip-the-line, audio) improve perceived value?**\n",
        "  - *Why:* Optimize product packaging and upsells.\n",
        "  - *How:* Co-mention analysis of add-on terms vs ratings delta.\n",
        "  - *Outputs:* Bundle recommendations; ROI estimates (proxy).\n",
        "\n",
        "### 5) Accessibility, Inclusivity & Safety\n",
        "- **Q11. What accessibility issues are most reported (mobility, stroller, visual, audio)?**\n",
        "  - *Why:* Compliance and inclusive tourism goals.\n",
        "  - *How:* Keyword/LLM tagging (“wheelchair”, “lift”, “stairs”); sentiment by theme.\n",
        "  - *Outputs:* Accessibility action list per attraction.\n",
        "- **Q12. Are there safety, cleanliness, or maintenance concerns?**\n",
        "  - *Why:* Public trust and reputation management.\n",
        "  - *How:* Topic extraction for “theft”, “dirty”, “broken”; severity scoring.\n",
        "  - *Outputs:* Incident trend dashboard; escalation alerts.\n",
        "\n",
        "### 6) Content & Interpretation Quality\n",
        "- **Q13. Do visitors find exhibits/descriptions engaging and clear?**\n",
        "  - *Why:* Education outcomes; cultural heritage value.\n",
        "  - *How:* Topic “guide”, “audio guide”, “exhibit”, “label”; sentiment & length.\n",
        "  - *Outputs:* Content improvement backlog; language priorities.\n",
        "- **Q14. Which tours or experiences receive the most praise/criticism?**\n",
        "  - *Why:* Curate best-practice formats.\n",
        "  - *How:* Entity extraction for tour types; compare ratings/sentiment.\n",
        "  - *Outputs:* Top/bottom experiences; design patterns.\n",
        "\n",
        "### 7) Journey to/around the Site\n",
        "- **Q15. Are directions, transport links, and wayfinding adequate?**\n",
        "  - *Why:* Reduce friction before arrival; distribute flows.\n",
        "  - *How:* Mentions of “tram”, “bus”, “parking”, “signs”; geospatial joins.\n",
        "  - *Outputs:* Map of transport pain points; signage recommendations.\n",
        "- **Q16. What nearby amenities (food, restrooms, shade) need attention?**\n",
        "  - *Why:* Onsite comfort and dwell time.\n",
        "  - *How:* Co-mentions with amenity terms; sentiment analysis.\n",
        "  - *Outputs:* Amenity gap list per site.\n",
        "\n",
        "### 8) Benchmarking & Positioning\n",
        "- **Q17. Which Lisbon attractions are over- or under-performing vs their peer group?**\n",
        "  - *Why:* Fair comparisons drive better targets.\n",
        "  - *How:* Peer sets by category/volume/price; z-scores; Bayesian shrinkage.\n",
        "  - *Outputs:* Peer-adjusted ranking; watchlist.\n",
        "- **Q18. How does Lisbon compare with European peers on similar categories?** *(optional if external benchmark available)*\n",
        "  - *Why:* City-level positioning.\n",
        "  - *How:* If comparable external data exist, mirror metrics vs EU peer cities.\n",
        "  - *Outputs:* Competitive gaps; best-practice transfer.\n",
        "\n",
        "### 9) Communications & Reputation\n",
        "- **Q19. What messages resonate most in positive reviews?**\n",
        "  - *Why:* Feed effective themes to campaigns.\n",
        "  - *How:* Keyphrase extraction from 5-star reviews; n-grams.\n",
        "  - *Outputs:* Messaging library by market.\n",
        "- **Q20. Which negative narratives spread, and how to counter them?**\n",
        "  - *Why:* Crisis prevention and response.\n",
        "  - *How:* Track emerging topics with rising negative sentiment.\n",
        "  - *Outputs:* Early-warning alerts; response playbooks.\n",
        "\n",
        "### 10) Monitoring & Governance\n",
        "- **Q21. Can we create a live quality-of-experience index for the city?**\n",
        "  - *Why:* Ongoing performance management.\n",
        "  - *How:* Composite index (ratings, crowding, safety, accessibility).\n",
        "  - *Outputs:* Monthly dashboard; thresholds for intervention.\n",
        "- **Q22. Where should Lisbon invest next quarter/year for maximum impact?**\n",
        "  - *Why:* Allocate budget to the highest ROI fixes.\n",
        "  - *How:* Impact × Effort matrix using driver importance and volume.\n",
        "  - *Outputs:* Prioritized roadmap with costed actions (estimates).\n"
      ]
    },
    {
      "cell_type": "markdown",
      "id": "251ec2a7",
      "metadata": {
        "id": "251ec2a7"
      },
      "source": [
        "\n",
        "## Methodology Overview (how to answer)\n",
        "\n",
        "1. **Data readiness**\n",
        "   - Parse dates, normalize ratings, unify attraction IDs/names, deduplicate, identify nationality of users, demographic information.\n",
        "   - Language detection; translate or handle multilingual text appropriately.\n",
        "2. **Text processing** (this OPTIONAL - not required)\n",
        "   - Clean text (lowercase, punctuation, stopwords); keep emojis if informative.\n",
        "   - Sentiment analysis (rule-based baseline; transformer if available).\n",
        "   - Topic modeling (BERTopic/LDA) to surface themes; map themes to policy levers.\n",
        "3. **Attribution / drivers** (this OPTIONAL - not required)\n",
        "   - Regress ratings on topic intensities and controls (attraction fixed effects, season).\n",
        "   - Use SHAP/feature importance to quantify drivers.\n",
        "4. **Time series & seasonality**\n",
        "   - Monthly aggregation; STL decomposition; change-point detection for drops/spikes.\n",
        "5. **Segmentation**\n",
        "   - Group by language/market, first-time vs repeat (heuristics), family vs solo (heuristics).\n",
        "6. **Visualization & reporting**\n",
        "   - League tables, heatmaps, calendar plots, maps (if coordinates available).\n",
        "7. **Governance**\n",
        "   - Thresholds for alerts; quarterly review; publish scorecards to stakeholders.\n"
      ]
    },
    {
      "cell_type": "markdown",
      "id": "f7cb33e2",
      "metadata": {
        "id": "f7cb33e2"
      },
      "source": [
        "\n",
        "## From Insights to Action\n",
        "\n",
        "1. **Top 5 urgent fixes** (crowding, safety, cleanliness) with owner and timeline.\n",
        "2. **Medium-term investments** (accessibility upgrades, interpretation quality).\n",
        "3. **Marketing messaging** to amplify top-performing experiences by market.\n",
        "4. **Monitoring**: monthly governance meeting using the city-level Experience Quality Index.\n"
      ]
    }
  ],
  "metadata": {
    "kernelspec": {
      "display_name": "Python312",
      "language": "python",
      "name": "python3"
    },
    "language_info": {
      "codemirror_mode": {
        "name": "ipython",
        "version": 3
      },
      "file_extension": ".py",
      "mimetype": "text/x-python",
      "name": "python",
      "nbconvert_exporter": "python",
      "pygments_lexer": "ipython3",
      "version": "3.12.9"
    },
    "colab": {
      "provenance": []
    }
  },
  "nbformat": 4,
  "nbformat_minor": 5
}